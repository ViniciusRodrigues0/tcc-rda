<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <header>
        <div class="header"><img src="/Img-Site/RDA.png" alt="Logo"></div>
    </header>

    <h1>Atualizar</h1>

    <div id="divBusca">
        <input type="text" id="txtBusca" placeholder="Buscar pelo RG..." oninput="formatarRG()" maxlength="12"/>
        <button id="busca-rg" onclick="BuscaAluno3()">Buscar</button>
    </div>
    
    <section class="sectionAtualiza">
        <div class="caixaAtualiza">
            <!-- Caixa de texto 1 -->
            <input type="file" id="imagem" accept="image/*">
            <div id="imagem-container"></div>
            <label for="caixa1">Nome do aluno:</label>
            <input type="text" id="nome1" placeholder="Insira o Nome:" oninput="copiarTexto()">
        
            <!-- Caixa de texto 2 -->
            <label for="caixa3">Data de Nascimento:</label>
            <input type="date" id="data1">
         
            <!-- Caixa de texto 3 -->
            <label for="caixa5">Nº de RG:</label>
            <input type="text" id="nrg1" maxlength="12" oninput="formatarRG()" disabled  placeholder="Ex:xx.xxx.xxx-x">
    
            <!-- Caixa de texto 4 -->
            <label for="caixa7">Unidade:</label>
            <select id="uni1">
                <option value="">Selecione Sua unidade</option>
                <option value="Senai 1.17 - Mogi das Cruzes">Senai 1.17 - Mogi das Cruzes</option>
                <option value="Senai 1.24 - Suzano">Senai 1.24 - Suzano</option>
            </select>
            <div class="wrapper">
                <div class="formAtualiza">
                    <button onclick="Atualizar()" style="cursor: pointer;">Atualizar</button>
                </div>
            </div>
        </div>
    
        <div class="cardAtualiza" id="cardAluno" style="display:none">
        
            <div class="caixa">
                <img id="imagem-aluno" class="imagem-aluno" src="" alt="Imagem do Aluno">
            </div>
            <hr>
            <div class="info">
                <div class="details">
                    <div class="detailsEsquerda">
                        <div id="nome-aluno"></div>
                        <span>Nome do Aluno</span>
                        <div class="dadosCarteira">
                            <p id="data-aluno"></p>
                            <span>Data de Nascimento</span>
                        </div>
                    </div>
                    <div class="detailsDireita">
                        <div class="dadosCarteira">
                            <p id="uni-aluno"></p>
                            <span>Unidade</span>
                        </div>
                        <div class="dadosCarteira">
                            <p id="vali-aluno"></p>
                            <span>Validade</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="caixa-rodape">
                <img src="Img-Site/image.png" alt="">
            </div>
        </div>
    </section>

    <footer>
        <div class="box">
            <a href="/PaginaDesktop.html"><img src="/Img-Site/big-id-card.png" alt="Página Carterinha"></a>
        </div>

        <div class="box">
            <a href="/Atualizar.html"><img src="/Img-Site/recarregar.png" alt="Página Notificações"></a>
        </div>

        <div class="box">
            <a href="/Deleta.html"><img src="/Img-Site/deletar-usuario.png" alt="Página Configurações"></a>
        </div>

        <div class="box">
            <img id="sair-app" onclick="sair()" src="/Img-Site/sair.png" alt="sair">
        </div>
    </footer>
    

    <script>
        function preencherCarteirinha(aluno) {

            document.getElementById('nome-aluno').textContent = aluno.nome;
            document.getElementById('data-aluno').textContent = aluno.dataNascimento;
            document.getElementById('uni-aluno').textContent = aluno.unidade;            
            document.getElementById('imagem-aluno').src = aluno['img-aluno'];
        
            // Define a data atual
            const dataAtual = new Date();
            const options = { day: '2-digit', month: '2-digit', year: 'numeric' };
            const dataAtualFormatada = dataAtual.toLocaleDateString('pt-BR', options);
        
            // Calcula a data de validade (6 meses a partir da data atual)
            const dataValidade = new Date();
            dataValidade.setMonth(dataAtual.getMonth() + 6);
            const dataValidadeFormatada = dataValidade.toLocaleDateString('pt-BR', options);
        
            // Exibe as datas
            document.getElementById('vali-aluno').textContent = `${dataAtualFormatada} Até ${dataValidadeFormatada}`;
        }

        // Função sair
        function sair() {
            Swal.fire({
                title: "Você tem certeza?",
                text: "Você não poderá reverter essa ação!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Sim, sair!",
                cancelButtonText: "Cancelar"
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        title: "Desconectado!",
                        text: "Você saiu do aplicativo com sucesso.",
                        icon: "success"
                    });
                    window.location.href = '/Index.html';
                }
            });
        }
    </script>


    <script src="script.js"></script>

</body>
</html>